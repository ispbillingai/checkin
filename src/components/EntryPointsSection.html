
<!-- Entry Points Section HTML -->
<div class="fade-in entry-points-section mb-20" style="animation-delay: 0.5s">
  <div class="text-center mb-10">
    <h2 class="text-3xl font-bold text-gray-800 mb-2">Available Entry Points</h2>
    <p class="text-lg text-gray-600 max-w-2xl mx-auto">Choose the entry points you'll need for your stay</p>
  </div>
  
  <div id="entryPointsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Entry points rendered here -->
  </div>
</div>

<script>
  // Initialize entry points section immediately with default values
  document.addEventListener('DOMContentLoaded', function() {
    console.log('EntryPointsSection.html: DOM loaded - ENTRY POINTS LOG');
    
    // Clear any existing content
    const container = document.getElementById('entryPointsContainer');
    if (container) {
      // Default entry points that will always show
      const defaultEntryPoints = [
        { id: 'entry1', name: 'Main Entrance', description: 'Front door at the main lobby' },
        { id: 'entry2', name: 'Side Entrance', description: 'Side entrance near the parking lot' },
        { id: 'entry3', name: 'Back Entrance', description: 'Back entrance near the garden' }
      ];
      
      // Always render these entry points immediately
      renderEntryPointsDirectly(defaultEntryPoints);
    }
  });
  
  // Function to render entry points directly
  function renderEntryPointsDirectly(entryPoints) {
    console.log(`EntryPointsSection.html: Rendering entry points - ENTRY POINTS LOG`);
    const container = document.getElementById('entryPointsContainer');
    if (!container) return;
    
    container.innerHTML = '';
    
    if (!entryPoints || entryPoints.length === 0) {
      container.innerHTML = '<div class="col-span-full text-center text-gray-500">No entry points available. Please contact support.</div>';
      return;
    }
    
    entryPoints.forEach(entry => {
      const card = document.createElement('div');
      card.className = "bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:shadow-lg hover:-translate-y-1";
      
      card.innerHTML = `
        <div class="p-6">
          <h3 class="text-lg font-semibold text-gray-800 mb-2">${entry.name}</h3>
          <p class="text-gray-600 mb-4">${entry.description || 'No description available'}</p>
          <button 
            class="select-entry-point-btn bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors w-full" 
            data-entry-id="${entry.id}" 
            data-entry-name="${entry.name}"
          >
            Select Entry Point
          </button>
        </div>
      `;
      
      container.appendChild(card);
    });
    
    // Add event listeners to buttons
    document.querySelectorAll('.select-entry-point-btn').forEach(button => {
      button.addEventListener('click', function() {
        const entryId = this.getAttribute('data-entry-id');
        const entryName = this.getAttribute('data-entry-name');
        console.log(`EntryPointsSection.html: Entry point selected: ${entryName} (${entryId}) - ENTRY POINTS LOG`);
        
        // Find the corresponding checkbox in the booking form
        const checkbox = document.getElementById(`entryPoint_${entryId}`);
        if (checkbox) {
          checkbox.checked = true;
          const event = new Event('change');
          checkbox.dispatchEvent(event);
          console.log(`EntryPointsSection.html: Checked entry point checkbox for ${entryName} - ENTRY POINTS LOG`);
        } 
        
        // Also update the entry points checkboxes area to show selected points
        const entryPointsCheckboxes = document.getElementById('entryPointsCheckboxes');
        if (entryPointsCheckboxes && entryPointsCheckboxes.innerHTML.includes('Loading entry points...')) {
          // If it's still showing loading, replace with actual checkboxes
          populateCheckboxesFromDefaults();
        }
        
        // Scroll to booking form
        const bookingForm = document.getElementById('bookingForm');
        if (bookingForm) {
          bookingForm.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Show toast if available
        if (window.showToastMessage) {
          window.showToastMessage('success', `${entryName} selected. Please complete your booking.`);
        }
      });
    });
  }
  
  // Helper function to populate checkboxes with default entry points
  function populateCheckboxesFromDefaults() {
    const entryPointsCheckboxes = document.getElementById('entryPointsCheckboxes');
    if (!entryPointsCheckboxes) return;
    
    const defaultEntryPoints = [
      { id: 'entry1', name: 'Main Entrance', description: 'Front door at the main lobby' },
      { id: 'entry2', name: 'Side Entrance', description: 'Side entrance near the parking lot' },
      { id: 'entry3', name: 'Back Entrance', description: 'Back entrance near the garden' }
    ];
    
    entryPointsCheckboxes.innerHTML = '';
    
    defaultEntryPoints.forEach(entry => {
      const checkboxId = `entryPoint_${entry.id}`;
      
      const div = document.createElement('div');
      div.className = 'flex items-start mb-2';
      
      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.id = checkboxId;
      checkbox.name = 'entryPoints[]';
      checkbox.value = entry.id;
      checkbox.className = 'mt-1 mr-2';
      
      const label = document.createElement('label');
      label.htmlFor = checkboxId;
      label.className = 'text-sm';
      
      const nameSpan = document.createElement('span');
      nameSpan.className = 'font-medium block';
      nameSpan.textContent = entry.name;
      
      const descSpan = document.createElement('span');
      descSpan.className = 'text-xs text-gray-500';
      descSpan.textContent = entry.description || 'No description available';
      
      label.appendChild(nameSpan);
      label.appendChild(descSpan);
      div.appendChild(checkbox);
      div.appendChild(label);
      entryPointsCheckboxes.appendChild(div);
    });
  }
</script>
