
<!-- Entry Points Section HTML -->
<div class="fade-in entry-points-section mb-20" style="animation-delay: 0.5s">
  <div class="text-center mb-10">
    <h2 class="text-3xl font-bold text-gray-800 mb-2">Available Entry Points</h2>
    <p class="text-lg text-gray-600 max-w-2xl mx-auto">Choose the entry points you'll need for your stay</p>
  </div>
  
  <div id="entryPointsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Entry points will be loaded here dynamically -->
  </div>
</div>

<script>
  // Initialize entry points section
  document.addEventListener('DOMContentLoaded', function() {
    console.log('EntryPointsSection.html: DOM content loaded - ENTRY POINTS LOG');
    
    // Clear any existing content
    const container = document.getElementById('entryPointsContainer');
    if (container) {
      console.log('EntryPointsSection.html: Setting up entry points - ENTRY POINTS LOG');
      
      // Get demo entry points immediately while API loads
      const demoEntryPoints = [
        { id: 'entry1', name: 'Main Entrance', description: 'Front door at the main lobby' },
        { id: 'entry2', name: 'Side Entrance', description: 'Side entrance near the parking lot' },
        { id: 'entry3', name: 'Back Entrance', description: 'Back entrance near the garden' }
      ];
      
      // Show demo entry points immediately
      renderEntryPointsDirectly(demoEntryPoints);
      
      // Try to load from API in background
      if (typeof window.initEntryPointsSection === 'function') {
        console.log('EntryPointsSection.html: Calling initEntryPointsSection - ENTRY POINTS LOG');
        try {
          window.initEntryPointsSection();
        } catch (error) {
          console.error('EntryPointsSection.html: Error in initEntryPointsSection - ENTRY POINTS LOG', error);
          // We already have demo points showing, so no need to show an error
        }
      } else {
        // Try to load the script if not found
        const script = document.createElement('script');
        script.src = '/src/js/entry-points-data.js';
        script.onload = function() {
          console.log('EntryPointsSection.html: entry-points-data.js loaded - ENTRY POINTS LOG');
          
          if (typeof window.initEntryPointsSection === 'function') {
            try {
              window.initEntryPointsSection();
            } catch (error) {
              console.error('EntryPointsSection.html: Error initializing after script load - ENTRY POINTS LOG', error);
              // Already showing demo points
            }
          }
        };
        
        document.body.appendChild(script);
      }
    }
  });
  
  // Function to render entry points directly as fallback
  function renderEntryPointsDirectly(entryPoints) {
    console.log(`EntryPointsSection.html: Rendering ${entryPoints.length} entry points directly - ENTRY POINTS LOG`);
    const container = document.getElementById('entryPointsContainer');
    if (!container) return;
    
    container.innerHTML = '';
    
    if (!entryPoints || entryPoints.length === 0) {
      container.innerHTML = '<div class="col-span-full text-center text-gray-500">No entry points available. Please contact support.</div>';
      return;
    }
    
    entryPoints.forEach(entry => {
      const card = document.createElement('div');
      card.className = "bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:shadow-lg hover:-translate-y-1";
      
      card.innerHTML = `
        <div class="p-6">
          <h3 class="text-lg font-semibold text-gray-800 mb-2">${entry.name}</h3>
          <p class="text-gray-600 mb-4">${entry.description || 'No description available'}</p>
          <button 
            class="select-entry-point-btn bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors w-full" 
            data-entry-id="${entry.id}" 
            data-entry-name="${entry.name}"
          >
            Select Entry Point
          </button>
        </div>
      `;
      
      container.appendChild(card);
    });
    
    // Add event listeners to buttons
    document.querySelectorAll('.select-entry-point-btn').forEach(button => {
      button.addEventListener('click', function() {
        const entryId = this.getAttribute('data-entry-id');
        const entryName = this.getAttribute('data-entry-name');
        console.log(`EntryPointsSection.html: Entry point selected: ${entryName} (${entryId}) - ENTRY POINTS LOG`);
        
        // Find the corresponding checkbox in the booking form
        const checkbox = document.getElementById(`entryPoint_${entryId}`);
        if (checkbox) {
          checkbox.checked = true;
          const event = new Event('change');
          checkbox.dispatchEvent(event);
          console.log(`EntryPointsSection.html: Checked entry point checkbox for ${entryName} - ENTRY POINTS LOG`);
        } else {
          console.error(`EntryPointsSection.html: Could not find checkbox for entry point ${entryId} - ENTRY POINTS LOG`);
        }
        
        // Scroll to booking form
        const bookingForm = document.getElementById('bookingForm');
        if (bookingForm) {
          bookingForm.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Show toast if available
        if (window.showToastMessage) {
          window.showToastMessage('success', `${entryName} selected. Please complete your booking.`);
        }
      });
    });
  }
</script>
