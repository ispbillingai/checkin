
<!-- Entry Points Section HTML -->
<div class="fade-in entry-points-section mb-20" style="animation-delay: 0.5s">
  <div class="text-center mb-10">
    <h2 class="text-3xl font-bold text-gray-800 mb-2">Available Entry Points</h2>
    <p class="text-lg text-gray-600 max-w-2xl mx-auto">Choose the entry points you'll need for your stay</p>
  </div>
  
  <div id="entryPointsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <!-- Entry points rendered here -->
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    console.log('EntryPointsSection.html: DOM loaded');
    fetchEntryPoints();
  });

  function fetchEntryPoints() {
    console.log('EntryPointsSection.html: Fetching entry points from database');
    
    fetch('/api/get_all_entry_points.php')
      .then(response => response.json())
      .then(data => {
        console.log('EntryPointsSection.html: Entry points data received', data);
        if (data.success && data.entry_points && data.entry_points.length > 0) {
          renderEntryPoints(data.entry_points);
        } else {
          console.log('EntryPointsSection.html: No entry points returned, using demo data');
          renderEntryPoints([
            { id: 'entry1', name: 'Main Entrance', description: 'Front door at the main lobby' },
            { id: 'entry2', name: 'Side Entrance', description: 'Side entrance near the parking lot' },
            { id: 'entry3', name: 'Back Entrance', description: 'Back entrance near the garden' }
          ]);
        }
      })
      .catch(error => {
        console.error('EntryPointsSection.html: Error fetching entry points', error);
        renderEntryPoints([
          { id: 'entry1', name: 'Main Entrance', description: 'Front door at the main lobby' },
          { id: 'entry2', name: 'Side Entrance', description: 'Side entrance near the parking lot' },
          { id: 'entry3', name: 'Back Entrance', description: 'Back entrance near the garden' }
        ]);
      });
  }
  
  function renderEntryPoints(entryPoints) {
    console.log(`EntryPointsSection.html: Rendering ${entryPoints.length} entry points`);
    const container = document.getElementById('entryPointsContainer');
    if (!container) return;
    
    container.innerHTML = '';
    
    entryPoints.forEach(entry => {
      const card = document.createElement('div');
      card.className = "bg-white rounded-lg shadow-md overflow-hidden transition-transform hover:shadow-lg hover:-translate-y-1";
      
      card.innerHTML = `
        <div class="p-6">
          <h3 class="text-lg font-semibold text-gray-800 mb-2">${entry.name}</h3>
          <p class="text-gray-600 mb-4">${entry.description || 'No description available'}</p>
          <button 
            class="select-entry-point-btn bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors w-full" 
            data-entry-id="${entry.id}" 
            data-entry-name="${entry.name}"
          >
            Select Entry Point
          </button>
        </div>
      `;
      
      container.appendChild(card);
    });
    
    // Add event listeners to buttons
    addEntryPointButtonListeners();
  }
  
  function addEntryPointButtonListeners() {
    document.querySelectorAll('.select-entry-point-btn').forEach(button => {
      button.addEventListener('click', function() {
        const entryId = this.getAttribute('data-entry-id');
        const entryName = this.getAttribute('data-entry-name');
        console.log(`EntryPointsSection.html: Entry point selected: ${entryName} (${entryId})`);
        
        // Update the entry point select in the booking form
        const entryPointSelect = document.getElementById('entryPoint');
        if (entryPointSelect) {
          entryPointSelect.value = entryId;
          const event = new Event('change');
          entryPointSelect.dispatchEvent(event);
          console.log(`EntryPointsSection.html: Selected entry point in dropdown: ${entryName}`);
        }
        
        // Scroll to booking form
        const bookingForm = document.getElementById('bookingForm');
        if (bookingForm) {
          bookingForm.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Show toast if available
        if (window.showToastMessage) {
          window.showToastMessage('success', `${entryName} selected. Please complete your booking.`);
        }
      });
    });
  }
</script>
